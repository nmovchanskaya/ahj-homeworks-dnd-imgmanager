!function(){"use strict";class e{constructor(e){this.id=Math.floor(performance.now()),this.url=e}}class t{constructor(){this.imgs=[]}addImg(e){this.imgs.push(e)}delete(e){this.imgs=this.imgs.filter((t=>t.id!==e))}getURLById(e){return this.imgs.filter((t=>t.id===e))[0].url}}(new class{constructor(){this.imgList=new t,this.onFileChange=this.onFileChange.bind(this),this.onDropFile=this.onDropFile.bind(this),this.onDeleteItem=this.onDeleteItem.bind(this)}renderImg(e){const t=document.createElement("div");t.className="img_div";const i=`\n        <img class="img_small" src="${e.url}">\n        <span class="img-del" data-id="${e.id}">\n            x\n        </span>\n    `;return t.innerHTML=i,t}generateImg(t){const i=new e(t);this.imgList.addImg(i);const n=this.renderImg(i);this.imgContainer.insertBefore(n,null)}onFileChange(e){console.dir(this.fileInput);const t=this.fileInput.files&&this.fileInput.files[0];if(!t)return;const i=URL.createObjectURL(t);this.generateImg(i)}onDropFile(e){e.preventDefault();const t=URL.createObjectURL(e.dataTransfer.files&&e.dataTransfer.files[0]);this.generateImg(t)}onDeleteItem(e){if("img-del"===e.target.className){const t=Number(e.target.dataset.id),i=this.imgList.getURLById(t);this.imgList.delete(t),e.target.closest("div").remove(),URL.revokeObjectURL(i)}}bindToDOM(){this.fileContainer=document.querySelector(".file-container"),this.fileInput=this.fileContainer.querySelector(".overlapped"),this.imgContainer=document.querySelector(".img-container"),this.fileContainer.addEventListener("click",(e=>{this.fileInput.dispatchEvent(new MouseEvent("click"))})),this.fileContainer.addEventListener("dragover",(e=>{e.preventDefault()})),this.fileContainer.addEventListener("drop",this.onDropFile),this.fileInput.addEventListener("change",this.onFileChange),this.imgContainer.addEventListener("click",this.onDeleteItem)}}).bindToDOM()}();